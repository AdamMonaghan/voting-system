
{% extends 'admin_interface/base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/select2.min.css' %}">
<h1><b>Admin</b></h1>
<hr/>
<form method="POST">{% csrf_token %}

    <h2><b>Personal Information</b></h2>
    {{ form.as_p }}
    <br>
    <h2><b>Change Password</b></h2>
    {% if current_roles %}
        <p><label for="id_cur_password">Current Password</label><input type="password" id="id_cur_password" name="current_password"></p>
    {% endif %}
    <p><label for="id_password">Password</label><input type="password" name="password" id="id_password"></p>
    <p><label for="id_password_repeat">Repeat Password</label><input type="password" name="repeatPassword" id="id_password_repeat"></p>
    <br>

    <h2><b>Roles</b></h2>
    <select name="roles[]" id="roles" class="js-example-basic-multiple js-states form-control" multiple="multiple" requ>
    {% for role in roles %}
        <option value="{{ role.id }}" {% if role.id in current_roles %} selected {% endif %} >{{ role.name }}</option>
    {% endfor %}
    </select>
    <input type="checkbox" id="selectAll" >
    
    <input type="submit" value="Submit" class="btn btn-success" style="display: block;">
</form>
<div class="errors">
    {% for error in errors %}
    <span class="error">{{ error }}</span>
    {% endfor %}
</div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="{% static 'js/select2.full.min.js' %}"></script>
<script>
    $(document).ready(function() {
    $(".js-example-basic-multiple").select2({
        width: 500
    });
    $("#selectAll").click(function(){
        if($("#selectAll").is(':checked') ){
            $("#roles > option").prop("selected","selected");
            $("#roles").trigger("change");
        }else{
            $("#roles > option").removeAttr("selected");
            $("#roles").trigger("change");
        }
    });
});
</script>

{% endblock %}